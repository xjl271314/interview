---
title: 正则表达式
nav:
  title: javascript
  path: /javascript
  order: 0
group:
  title: javascript相关试题
  path: /javascript/project
---

# RegExp 正则表达式

- 2021.11.05

## 全局匹配含义

[在线正则转换流程网站](regexper.com)

- `g`: 表示全局(global)模式，即模式将被应用于所有字符串，而非在发现第一个匹配项时立即停止。
- `i`:表示不区分`大小写(case-insensitive)`模式，即在确定匹配项时忽略模式与字符串的大小写;
- `m`:表示`多行(multiline)`模式，即在到达一行文本末尾时还会继续查找下一行中是否存在与模式匹配的项。

## 常用正则表达式字符含义

- `\` : 在非特殊字符之前的反斜杠表示下一个字符是特殊字符，不能按照字面理解。

  > 例如，前面没有 "\" 的 "b" 通常匹配小写字母 "b"，即字符会被作为字面理解，无论它出现在哪里。但如果前面加了 "\"，它将不再匹配任何字符，而是表示一个字符边界。在特殊字符之前的反斜杠表示下一个字符不是特殊字符，应该按照字面理解。

  | 特殊字符   | 正则表达式 | 记忆方式                                  |
  | :--------- | :--------- | :---------------------------------------- |
  | 换行符     | \n         | new line                                  |
  | 换页符     | \f         | form feed                                 |
  | 回车符     | \r         | return                                    |
  | 空白符     | \s         | space                                     |
  | 制表符     | \t         | tab                                       |
  | 垂直制表符 | \v         | vertical tab                              |
  | 回退符     | [\b]       | backspace,之所以使用[]符号是避免和\b 重复 |

- `^`: 匹配输入的开始。如果多行标志被设置为 `true`，那么也匹配换行符后紧跟的位置。

  > 例如，/^A/ 并不会匹配 "an A" 中的 'A'，但是会匹配 "An E" 中的 'A'。

- `$`: 匹配输入的结束。如果多行标示被设置为 true，那么也匹配换行符前的位置。

> 例如，/t$/ 并不会匹配 "eater" 中的 't'，但是会匹配 "eat" 中的 't'。

- `*`: 匹配前一个表达式 0 次或多次。等价于 `{0,}`。

> 例如，/bo\*/ 会匹配 "A ghost boooooed" 中的 'booooo' 和 "A bird warbled" 中的 'b'，但是在 "A goat grunted" 中不会匹配任何内容。

- `+`: 匹配前面一个表达式 1 次或者多次。等价于 `{1,}`。

> 例如，/a+/ 会匹配 "candy" 中的 'a' 和 "caaaaaaandy" 中所有的 'a'，但是在 "cndy" 中不会匹配任何内容。

- `?`: 匹配前面一个表达式 0 次或者 1 次。等价于 `{0,1}`。

> 例如，/e?le?/ 匹配 "angel" 中的 'el'、"angle" 中的 'le' 以及 "oslo' 中的 'l'。

如果紧跟在任何量词 `*`、`+`、`?` 或 `{}` 的后面，将会使量词变为`非贪婪（匹配尽量少的字符）`,和`缺省使用的贪婪模式（匹配尽可能多的字符）`正好相反。

例如，对 "123abc" 使用 `/\d+/` 将会匹配 "123"，而使用 `/\d+?/` 则只会匹配到 "1"。

- `.`: （小数点）默认匹配除换行符之外的任何单个字符。

> 例如，/.n/ 将会匹配 "nay, an apple is on the tree" 中的 'an' 和 'on'，但是不会匹配 'nay'。如果 s ("dotAll") 标志位被设为 true，它也会匹配换行符。

| 匹配规则     | 元字符          | 记忆方式             |
| :----------- | :-------------- | :------------------- |
| 0 次或 1 次  | ?               | 有或没有             |
| 0 次或无数次 | \*              | 有或者无穷           |
| 1 次或无数次 | +               | 有 1 次或无穷        |
| 特定次数     | {x}, {min, max} | 指定次数或者指定范围 |

- `(x)`: 像下面的例子展示的那样，它会匹配 'x' 并且记住匹配项。其中括号被称为`捕获括号`。

> 模式`/(foo) (bar) \1 \2/ 中的 '(foo)' 和 '(bar)'`匹配并记住字符串 `"foo bar foo bar"`中前两个单词。
> 模式中的 \1 和 \2 表示第一个和第二个被捕获括号匹配的子字符串，即 foo 和 bar，匹配了原字符串中的后两个单词。
> 注意 `\1、\2、...、\n`是用在正则表达式的匹配环节。
> 而在正则表达式的替换环节，则要使用像 `$1`、`$2`、`...`、`$n` 这样的语法，
> 例如，`'bar foo'.replace(/(...) (...)/, '$2 $1')`。`$&` 表示整个用于匹配的原字符串。

- `x(?=y)`: 匹配'x'仅仅当'x'后面跟着'y'.这种叫做`先行断言`。

> 例如，/Jack(?=Sprat)/会匹配到'Jack'仅仅当它后面跟着'Sprat'。
> /Jack(?=Sprat|Frost)/匹配‘Jack’仅仅当它后面跟着'Sprat'或者是‘Frost’。但是‘Sprat’和‘Frost’都不是匹配结果的一部分。

- `(?<=y)x`: 匹配'x'仅仅当'x'前面是'y'.这种叫做`后行断言`。

> 例如，/(?<=Jack)Sprat/会匹配到' Sprat '仅仅当它前面是' Jack '。/(?<=Jack|Tom)Sprat/匹配‘ Sprat ’仅仅当它前面是'Jack'或者是‘Tom’。但是‘Jack’和‘Tom’都不是匹配结果的一部分。

- `x(?!y)`: 仅仅当'x'后面不跟着'y'时匹配'x'，这被称为`正向否定查找`。

> 例如，仅仅当这个数字后面没有跟小数点的时候，/\d+(?!\.)/ 匹配一个数字。正则表达式/\d+(?!\.)/.exec("3.141")匹配‘141’而不是‘3.141’

- `(?<!y)x`: 仅仅当'x'前面不是'y'时匹配'x'，这被称为`反向否定查找`。

> 例如, 仅仅当这个数字前面没有负号的时候，/(?<!-)\d+/ 匹配一个数字。/(?<!-)\d+/.exec('3') 匹配到 "3"./(?<!-)\d+/.exec('-3') 因为这个数字前有负号，所以没有匹配到。

- `x|y`: 匹配‘x’或者‘y’。

> 例如，`/green|red/`匹配`“green apple”`中的`‘green’`和`“red apple”`中的`‘red’`

- `{n}`:n 是一个正整数，匹配了前面一个字符刚好出现了 n 次。

> 比如， /a{2}/ 不会匹配“candy”中的'a',但是会匹配“caandy”中所有的 a，以及“caaandy”中的前两个'a'。

- `{n,}`: n 是一个正整数，匹配前一个字符至少出现了 n 次。

> 例如, /a{2,}/ 匹配 "aa", "aaaa" 和 "aaaaa" 但是不匹配 "a"。

- `{n,m}`: n 和 m 都是整数。匹配前面的字符至少 n 次，最多 m 次。如果 n 或者 m 的值是 0， 这个值被忽略。

> 例如，/a{1, 3}/ 并不匹配“cndy”中的任意字符，匹配“candy”中的 a，匹配“caandy”中的前两个 a，也匹配“caaaaaaandy”中的前三个 a。注意，当匹配”caaaaaaandy“时，匹配的值是“aaa”，即使原始的字符串中有更多的 a。

- `\d`: 匹配一个数字。等价于[0-9]。

> 例如， /\d/ 或者 /[0-9]/ 匹配"B2 is the suite number."中的'2'。

- `\D`: 匹配一个非数字字符。等价于[^0-9]。

> 例如， /\D/ 或者 /[^0-9]/ 匹配"B2 is the suite number."中的'B' 。

- `\n`: 匹配一个换行符 (U+000A)。

- `\f` : 匹配一个换页符 (U+000C)。

- `\r`: 匹配一个回车符 (U+000D)。

- `\s`: 匹配一个空白字符，包括空格、制表符、换页符和换行符。

> 例如, /\s\w\*/ 匹配"foo bar."中的' bar'。

- `\S`: 匹配一个非空白字符。

> 例如，/\S\w\*/ 匹配"foo bar."中的'foo'。

- `\t`: 匹配一个水平制表符 (U+0009)。

- `\v`: 匹配一个垂直制表符 (U+000B)。

- `\w`: 匹配一个单字字符（字母、数字或者下划线）。等价于`[A-Za-z0-9_]`。

> 例如, /\w/ 匹配 "apple," 中的 'a'，"$5.28,"中的 '5' 和 "3D." 中的 '3'。

- `\W`: 匹配一个非单字字符。等价于 `[^A-Za-z0-9_]`。

> 例如, /\W/ 或者 /[^a-za-z0-9_]/ 匹配 "50%." 中的 '%'。

- `\b`: 匹配一个零宽单词边界，即\w 和\W 之间的位置，或字符串首位与\w 或\w 与字符串末尾的位置。

  > 例如, /\bcat\b/ 匹配 The cat scattered his food all over the room 中的 cat。

- `\B`: 匹配一个零宽非单词边界。
  > 例如, /\B/ 匹配 "aa bb"中的 空格。

| 回溯查找   | 正则                   | 记忆方式                                                            |
| :--------- | :--------------------- | :------------------------------------------------------------------ |
| 引用       | \0,\1,\2 和 $0, $1, $2 | 转义+数字                                                           |
| 非捕获组   | (?:)                   | 引用表达式(()), 本身不被消费(?),引用(:)                             |
| 前向查找   | (?=)                   | 引用子表达式(())，本身不被消费(?), 正向的查找(=)                    |
| 前向负查找 | (?!)                   | 引用子表达式(())，本身不被消费(?), 负向的查找(!)                    |
| 后向查找   | (?<=)                  | 引用子表达式(())，本身不被消费(?), 后向的(<，开口往后)，正的查找(=) |
| 后向负查找 | (?<!)                  | 引用子表达式(())，本身不被消费(?), 后向的(<，开口往后)，负的查找(!) |

## 常用方法与描述

|    方法    | 描述                                                                                                  |
| :--------: | :---------------------------------------------------------------------------------------------------- |
|   `exec`   | 一个在字符串中执行查找匹配的`RegExp`方法，它返回一个数组（未匹配到则返回`null`）。                    |
|   `test`   | 一个在字符串中测试是否匹配的`RegExp`方法，它返回 `true`或 `false`。                                   |
|  `match`   | 一个在字符串中执行查找匹配的`String`方法，它返回一个数组，在未匹配到时会返回 `null`。                 |
| `matchAll` | 一个在字符串中执行查找所有匹配的`String`方法，它返回一个迭代器（`iterator`）。                        |
|  `search`  | 一个在字符串中测试匹配的`String`方法，它返回匹配到的位置索引，或者在失败时返回-1。                    |
| `replace`  | 一个在字符串中执行查找匹配的`String`方法，并且使用替换字符串替换掉匹配到的子字符串。                  |
|  `split`   | 一个使用正则表达式或者一个固定字符串分隔一个字符串，并将分隔后的子字符串存储到数组中的`String` 方法。 |
