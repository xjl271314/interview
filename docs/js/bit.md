---
title: 位运算
nav:
  title: 前端基础
  path: /base
  order: 0
group:
  title: javascript相关试题
  path: /javascript/project
---

# javaScript 中的 位运算

- 2021.09.26

## 按位与(&)

> `&`运算符（按位与）用于对两个二进制操作数逐位进行比较，并根据下表所示的换算表返回结果。

| 第一个数的位值 | 第二个数的位值 | 运算结果 |
| :------------- | :------------- | :------- |
| 1              | 1              | 1        |
| 1              | 0              | 0        |
| 0              | 1              | 0        |
| 0              | 0              | 0        |

```jsx
/**
 * inline: true
 */
import React from 'react';
import { Info } from 'interview';

const txt =
  '`奇数`与1运算后返回1，`偶数`与1运算后返回0。\n因此我们可以用此方案来判断一个数是奇数还是偶数';

export default () => <Info type="info" txt={txt} />;
```

### 判断奇偶数

```js
const a = 1;
const b = 2;

console.log(a & 1); // 1
console.log(b & 1); // 0

console.log(a % 2 === 0); // false
console.log(b % 2 === 0); // true
```

### 判断权限

根据奇偶数的特性我们还经常用来判断权限。

假设某个管理后台的用户身份有 4 种:

- 超级管理员 1
- 一般管理理员 2
- 可操作管理员 3
- 仅查看管理员 4

上级管理员包含了下级管理员的所有权限，比如某个功能开放的权限是`可操作权限`，那么`超级管理员`、`一般管理理员`、`可操作管理员`都可以进行操作，我们可以使用数组或者字符串形式来进行权限的区分比如`[1,2,3]`或者`1,2,3`然后前端进行判断。

但是当权限涉及的人员较广时，涉及到 10 个层级，那么这个数据量就非常的大，这个时候`按位与`运算就非常有用了。

比如我们将权限分为 `0000` 四种类型，因此上述管理员类型对应为:

- 超级管理员 1000
- 一般管理理员 0100
- 可操作管理员 0010
- 仅查看管理员 0001

然后上述某个权限可以存储一个`int类型`的字段，比如`4`表示该权限最低是`可操作管理员`权限，比该权限高的就都拥有该权限了。

## 按位或(|)

> `|`运算符（按位或）用于对两个二进制操作数逐位进行比较，并根据下表所示的换算表返回结果，只要其中某个值为真返回值为真。

| 第一个数的位值 | 第二个数的位值 | 运算结果 |
| :------------- | :------------- | :------- |
| 1              | 1              | 1        |
| 1              | 0              | 1        |
| 0              | 1              | 1        |
| 0              | 0              | 0        |

## 按位异或(^)

> `^`运算符（按位异或）用于对两个二进制操作数逐位进行比较，并根据下表所示的换算表返回结果，如果两个值一样返回 0。

| 第一个数的位值 | 第二个数的位值 | 运算结果 |
| :------------- | :------------- | :------- |
| 1              | 1              | 0        |
| 1              | 0              | 1        |
| 0              | 1              | 1        |
| 0              | 0              | 0        |

### 变量 0，1 切换

```js
// 三目运算法
flag = flag ? 0 : 1;

// ^位异或运算符
flag ^= 1;
```

### 判断符号是否相同

```js
let a = 1,
  b = -2;
(a ^ b) >= 0; // true 相同; false 不同
```

### 检查数字是否不相等

```js
// before
if (a !== 1){
    ...
}

// after
if (a ^ 1){
    ...
}
```

## 按位非(〜)

> `~`运算符（按位非）用于对所给的数按位进行取反。

## 按位左移

> `<<`运算符（按位左移）用于对所给的数将进行左移指定位数。

### 快速幂计算

```js
let a = 2; // 0010

a << 2; // 1000 --> 8
```

## 按位右移

> `>>`运算符（按位右移）用于对所给的数按位进行右移指定位数。

```js
let a = 2; // 0010
let b = 100; // 1100 1000

a >> 2; //  0010 --> 2
b >> 2; // 0001 1001 --> 25
```
