---
title: RTMP、HTTP-FLV、HLS
nav:
  title: business
  path: /business
group:
  title: 直播相关试题
  path: /business/live/project
---

# RTMP、HTTP-FLV、HLS 之间有啥区别?

- 2021.06.22

## RTMP

> `RTMP`是互联网`TCP/IP五层体系结构`中应用层的协议,全称 `Real Time Messaging Protocol` ，即`实时消息协议`，它的延时在`1s~3s`左右。底层是基于 `TCP` 协议的，其传输格式为`RTMP Chunk Format`,其`媒体流数据的传输`和 `RTMP 控制消息的传输`都是基于此格式的。

在我们使用 `RTMP` 协议传输数据之前，`RTMP` 也像 `TCP 协议`一样，先进行`三次握手`才能将连接建立起来。

基于 `RTMP` 协议底层依赖于 `TCP` 协议，不会出现丢包、乱序等问题，对音视频业务质量有很好的保障，因此常用于直播推流。

## HTTP-FLV

> `FLV`是`Adobe`推出的另一种视频格式,是一种在网络上传输的流媒体数据存储容器格式。相比`RTMP`他的媒体头部信息比较轻量,因此传输速度更快。

相较于 `RTMP` 协议，`HTTP-FLV` 能够好的穿透防火墙，它是基于 `HTTP/80` 传输，有效避免被`防火墙拦截`。除此之外，它可以通过 `HTTP 302` 跳转灵活调度/负载均衡，支持使用 `HTTPS` 加密传输，也能够兼容支持 `Android`，`iOS` 的移动端。

## HLS

> HLS，全称 `HTTP Live Streaming`，是苹果公司实现的基于 `HTTP` 的流媒体传输协议。它可以支持流媒体的直播和点播，主要应用在 iOS 系统和 HTML5 网页播放器中。

`HLS` 将多媒体文件或直接流进行切片，形成一堆的 `ts 文件`和 `m3u8 索引文件`并保存到磁盘。

当播放器获取 `HLS` 流时，它首先根据`时间戳`，通过 `HTTP` 服务，从 `m3u8 索引文件`获取最新的 `ts` 视频文件切片地址，然后再通过 `HTTP` 协议将它们下载并缓存起来。当播放器播放 `HLS` 流时，播放线程会从缓冲区中读出数据并进行播放。

## 总结

在推流上更推荐使用 `rtmp` 协议进行推流，在拉流上推荐使用 `HTTP-FLV`既能保证实时性又省去了部分协议交互时间，首屏时间更短，可拓展的功能也更多。
