---
title: Node高并发原理
nav:
  title: 工程化
  path: /project
  order: 0
group:
  title: Node相关
  path: /project/node
---

# Node 高并发原理

- 2022.11.02

`Node·js`之所以单线程可以处理高并发的原因，得益于内部的`事件循环机制`和`底层线程池`实现。

遇到`异步任务`，node 将所有的阻塞操作都交给了内部的线程池去实现。

本质上的异步操作还是由`线程池`完成的，主线程本身只负责不断的往返调度，从而实现异步非阻塞 I/O，这便是 node 单线程和事件驱动的精髓之处。

**整体流程：**

1. 每个 Node 进程只有一个主线程在执行程序代码。
2. 当用户的网络请求、数据库操作、读取文件等其它的异步操作时，node 都会把它放到 Event Queue（"事件队列"）之中，此时并不会立即执行它，代码也不会被阻塞，继续往下走，直到主线程代码执行完毕。
3. 主线程代码执行完毕完成后，然后通过事件循环机制，依次取出对应的事件，从线程池中分配一个对应的线程去执行，当有事件执行完毕后，会通知主线程，主线程执行回调拿到对应的结果。
